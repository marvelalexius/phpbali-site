!function(){var t,i,e,s,o=window.jQuery,n=o(window),c=o(document),r="http://www.w3.org/2000/svg",a="SVGAngle"in window&&((e=document.createElement("div")).innerHTML="<svg/>",i=(e.firstChild&&e.firstChild.namespaceURI)==r,e.innerHTML="",i),p="transition"in(s=document.createElement("div").style)||"WebkitTransition"in s||"MozTransition"in s||"msTransition"in s||"OTransition"in s,l="ontouchstart"in window,h="mousedown"+(l?" touchstart":""),u="mousemove.clockpicker"+(l?" touchmove.clockpicker":""),d="mouseup.clockpicker"+(l?" touchend.clockpicker":""),m=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null;function k(t){return document.createElementNS(r,t)}function f(t){return(t<10?"0":"")+t}var v=0;var g=100,b=80,w=54,y=13,S=2*g,A=p?350:1,M=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block" style="position:relative;">',"</span>","</div>","</div>"].join("");function H(i,e){var s,n,r=o(M),p=r.find(".clockpicker-plate"),l=r.find(".clockpicker-hours"),m=r.find(".clockpicker-minutes"),H=r.find(".clockpicker-am-pm-block"),P="INPUT"===i.prop("tagName"),V=P?i:i.find("input"),T=i.find(".input-group-addon"),x=this;if(this.id=(n=++v+"",(s="cp")?s+n:n),this.element=i,this.options=e,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=P,this.input=V,this.addon=T,this.popover=r,this.plate=p,this.hoursView=l,this.minutesView=m,this.amPmBlock=H,this.spanHours=r.find(".clockpicker-span-hours"),this.spanMinutes=r.find(".clockpicker-span-minutes"),this.spanAmPm=r.find(".clockpicker-span-am-pm"),this.amOrPm="PM",e.twelvehour){var D=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");o(D);e.upperCaseAmPm?(x.amStr="AM",x.pmStr="PM"):(x.amStr="am",x.pmStr="pm"),e.leadingSpaceAmPm?(x.amStrFormatted=" "+x.amStr,x.pmStrFormatted=" "+x.pmStr):(x.amStrFormatted=x.amStr,x.pmStrFormatted=x.pmStr),o('<a class="btn btn-sm btn-default clockpicker-button am-button">'+x.amStr+"</a>").on("click",function(t){x.amOrPm="am",x.popover.find(".clockpicker-span-am-pm").empty().append(x.amStrFormatted),x.popover.find(".pm-button").removeClass("clockpicker-button-on"),o(this).addClass("clockpicker-button-on"),C(e.afterAmPmSelect)}).appendTo(this.amPmBlock),o('<a class="btn btn-sm btn-default clockpicker-button pm-button">'+x.pmStr+"</a>").on("click",function(){x.amOrPm="pm",x.popover.find(".clockpicker-span-am-pm").empty().append(x.pmStrFormatted),x.popover.find(".am-button").removeClass("clockpicker-button-on"),o(this).addClass("clockpicker-button-on"),C(e.afterAmPmSelect)}).appendTo(this.amPmBlock),o('<a class="btn btn-sm btn-default clockpicker-button switch-hand-button" style="color:#666 !important; background-color:transparent !important; padding:0px; border: 1px solid rgba(0, 0, 0, .2); position:absolute; width:70px; display:block; left:50%; top:0px; margin-left:-35px;">Min <i class="fa fa-arrow-right"></i></a>').on("click",function(){"minutes"==x.currentView?x.spanHours.click():x.spanMinutes.click()}).appendTo(this.amPmBlock)}e.autoclose||o('<a class="btn btn-sm btn-default btn-block clockpicker-button clockpicker-button-done">'+e.donetext+"</a>").click(o.proxy(this.done,this)).appendTo(r),"top"!==e.placement&&"bottom"!==e.placement||"top"!==e.align&&"bottom"!==e.align||(e.align="left"),"left"!==e.placement&&"right"!==e.placement||"left"!==e.align&&"right"!==e.align||(e.align="top"),r.addClass(e.placement),r.addClass("clockpicker-align-"+e.align),this.spanHours.click(o.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(o.proxy(this.toggleView,this,"minutes")),V.on("focus.clockpicker click.clockpicker",o.proxy(this.show,this)),T.on("click.clockpicker",o.proxy(this.toggle,this));var F,E,I,B,O=o('<div class="clockpicker-tick"></div>');if(e.twelvehour)for(F=1;F<13;F+=1)E=O.clone(),I=F/6*Math.PI,B=b,E.css("font-size","120%"),E.css({left:g+Math.sin(I)*B-y,top:g-Math.cos(I)*B-y}),E.html(0===F?"0":F),l.append(E),E.on(h,L);else for(F=0;F<24;F+=1){E=O.clone(),I=F/6*Math.PI;var z=F>0&&F<13;B=z?w:b,E.css({left:g+Math.sin(I)*B-y,top:g-Math.cos(I)*B-y}),z&&E.css("font-size","120%"),E.html(0===F?"00":F),l.append(E),E.on(h,L)}for(F=0;F<60;F+=5)E=O.clone(),I=F/30*Math.PI,E.css({left:g+Math.sin(I)*b-y,top:g-Math.cos(I)*b-y}),E.css("font-size","120%"),E.html(f(F)),m.append(E),E.on(h,L);function L(i,s){var o=p.offset(),n=/^touch/.test(i.type),r=o.left+g,l=o.top+g,h=(n?i.originalEvent.touches[0]:i).pageX-r,m=(n?i.originalEvent.touches[0]:i).pageY-l,k=Math.sqrt(h*h+m*m),f=!1;if(!s||!(k<b-y||k>b+y)){i.preventDefault();var v=setTimeout(function(){t.addClass("clockpicker-moving")},200);a&&p.append(x.canvas),x.setHand(h,m,!s,!0),c.off(u).on(u,function(t){t.preventDefault();var i=/^touch/.test(t.type),e=(i?t.originalEvent.touches[0]:t).pageX-r,s=(i?t.originalEvent.touches[0]:t).pageY-l;(f||e!==h||s!==m)&&(f=!0,x.setHand(e,s,!1,!0))}),c.off(d).on(d,function(i){c.off(d),i.preventDefault();var o=/^touch/.test(i.type),n=(o?i.originalEvent.changedTouches[0]:i).pageX-r,a=(o?i.originalEvent.changedTouches[0]:i).pageY-l;(s||f)&&n===h&&a===m&&x.setHand(n,a),"hours"===x.currentView?x.toggleView("minutes",A/2):(e.autoclose&&(x.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){x.done()},A/2)),C(e.afterMinuteSelect)),p.prepend(Z),clearTimeout(v),t.removeClass("clockpicker-moving"),c.off(u)})}}if(p.on(h,function(t){0===o(t.target).closest(".clockpicker-tick").length&&L(t,!0)}),a){var Z=r.find(".clockpicker-canvas"),j=k("svg");j.setAttribute("class","clockpicker-svg"),j.setAttribute("width",S),j.setAttribute("height",S);var U=k("g");U.setAttribute("transform","translate("+g+","+g+")");var W=k("circle");W.setAttribute("class","clockpicker-canvas-bearing"),W.setAttribute("cx",0),W.setAttribute("cy",0),W.setAttribute("r",2);var N=k("line");N.setAttribute("x1",0),N.setAttribute("y1",0);var X=k("circle");X.setAttribute("class","clockpicker-canvas-bg"),X.setAttribute("r",y);var Y=k("circle");Y.setAttribute("class","clockpicker-canvas-fg"),Y.setAttribute("r",3.5),U.appendChild(N),U.appendChild(X),U.appendChild(Y),U.appendChild(W),j.appendChild(U),Z.append(j),this.hand=N,this.bg=X,this.fg=Y,this.bearing=W,this.g=U,this.canvas=Z}C(this.options.init)}function C(t){t&&"function"==typeof t&&t()}H.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"Done",autoclose:!1,twelvehour:!0,vibrate:!0,leadingZeroHours:!1,upperCaseAmPm:!0,leadingSpaceAmPm:!0},H.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},H.prototype.locate=function(){var t=this.element,i=this.popover,e=t.offset(),s=t.outerWidth(),o=t.outerHeight(),n=this.options.placement,c=this.options.align,r={};switch(i.show(),n){case"bottom":r.top=e.top+o;break;case"right":r.left=e.left+s;break;case"top":r.top=e.top-i.outerHeight();break;case"left":r.left=e.left-i.outerWidth()}switch(c){case"left":r.left=e.left;break;case"right":r.left=e.left+s-i.outerWidth();break;case"top":r.top=e.top;break;case"bottom":r.top=e.top+o-i.outerHeight()}i.css(r)},H.prototype.show=function(i){if(!this.isShown){C(this.options.beforeShow);var e=this;if(this.isAppended||(t=o(document.body).append(this.popover),n.on("resize.clockpicker"+this.id,function(){e.isShown&&e.locate()}),o(".modal").length&&o(".modal").on("scroll",function(){e.isShown&&e.locate()}),this.isAppended=!0),""==this.input.prop("value"))var s="",r="am";else if(this.options.twelvehour)if(this.options.leadingSpaceAmPm){s=(a=this.input.prop("value").split(" "))[0];if(a.length>1)r=a[1].toLowerCase();else r="am"}else{var a;r=(a=this.input.prop("value")).slice(-2).toLowerCase(),s=a.slice(0,-2)}else s=this.input.prop("value"),r="am";var p=((s||this.options.default||"")+"").split(":");if("now"===p[0]){var l=new Date(+new Date+this.options.fromnow);p=[l.getHours(),l.getMinutes()]}this.hours=+p[0]||0,this.minutes=+p[1]||0,this.amOrPm=r,this.options.leadingZeroHours?this.spanHours.html(f(this.hours)):this.spanHours.html(this.hours),this.spanMinutes.html(f(this.minutes)),this.options.twelvehour&&("am"==this.amOrPm?this.popover.find(".am-button").click():this.popover.find(".pm-button").click()),this.toggleView("hours"),this.locate(),this.isShown=!0,c.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var i=o(t.target);0===i.closest(e.popover).length&&0===i.closest(e.addon).length&&0===i.closest(e.input).length&&e.hide()}),c.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&e.hide()}),C(this.options.afterShow)}},H.prototype.hide=function(){C(this.options.beforeHide),this.isShown=!1,c.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),c.off("keyup.clockpicker."+this.id),this.popover.hide(),C(this.options.afterHide)},H.prototype.toggleView=function(t,i){var e=!1;"minutes"===t&&"visible"===o(this.hoursView).css("visibility")&&(C(this.options.beforeHourSelect),e=!0);var s="hours"===t,n=s?this.hoursView:this.minutesView,c=s?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",s),this.spanMinutes.toggleClass("text-primary",!s),c.addClass("clockpicker-dial-out"),n.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){c.css("visibility","hidden")},A),e&&C(this.options.afterHourSelect),"hours"==this.currentView?this.popover.find(".switch-hand-button").html('Min <i class="fa fa-arrow-right"></i>'):this.popover.find(".switch-hand-button").html('<i class="fa fa-arrow-left"></i> Hour')},H.prototype.resetClock=function(t){var i=this.currentView,e=this[i],s="hours"===i,o=e*(Math.PI/(s?6:30)),n=s&&e>0&&e<13?w:b,c=Math.sin(o)*n,r=-Math.cos(o)*n,p=this;a&&t?(p.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){p.canvas.removeClass("clockpicker-canvas-out"),p.setHand(c,r)},t)):this.setHand(c,r)},H.prototype.setHand=function(t,i,e,s){var n,c=Math.atan2(t,-i),r="hours"===this.currentView,p=Math.PI/(r||e?6:30),l=Math.sqrt(t*t+i*i),h=this.options,u=r&&l<(b+w)/2,d=u?w:b;if(h.twelvehour&&(d=b),c<0&&(c=2*Math.PI+c),c=(n=Math.round(c/p))*p,h.twelvehour?r?0===n&&(n=12):(e&&(n*=5),60===n&&(n=0)):r?(12===n&&(n=0),n=u?0===n?12:n:0===n?0:n+12):(e&&(n*=5),60===n&&(n=0)),this[this.currentView]!==n&&m&&this.options.vibrate&&(this.vibrateTimer||(navigator[m](10),this.vibrateTimer=setTimeout(o.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=n,r?this.options.leadingZeroHours?this.spanHours.html(f(n)):this.spanHours.html(n):this.spanMinutes.html(f(n)),a){s||!r&&n%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var k=Math.sin(c)*d,v=-Math.cos(c)*d;this.hand.setAttribute("x2",k),this.hand.setAttribute("y2",v),this.bg.setAttribute("cx",k),this.bg.setAttribute("cy",v),this.fg.setAttribute("cx",k),this.fg.setAttribute("cy",v)}else this[r?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=o(this);t.toggleClass("active",n===+t.html())})},H.prototype.done=function(){C(this.options.beforeDone),this.hide();var t=this.input.prop("value"),i="";this.options.leadingZeroHours?i+=f(this.hours):i+=this.hours,i+=":",i+=f(this.minutes),this.options.twelvehour&&("am"==this.amOrPm?i+=this.amStrFormatted:i+=this.pmStrFormatted),this.input.prop("value",i),i!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),C(this.options.afterDone)},H.prototype.realtimeDone=function(){if(void 0!==this.hours&&void 0!==this.minutes){C(this.options.beforeDone);var t=this.input.prop("value"),i="";this.options.leadingZeroHours?i+=f(this.hours):i+=this.hours,i+=":",i+=f(this.minutes),this.options.twelvehour&&("am"==this.amOrPm?i+=this.amStrFormatted:i+=this.pmStrFormatted),this.input.prop("value",i),i!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),C(this.options.afterDone)}},H.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(n.off("resize.clockpicker"+this.id),this.popover.remove())},o.fn.clockpicker=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o(this),s=e.data("clockpicker");if(s)"function"==typeof s[t]&&s[t].apply(s,i);else{var n=o.extend({},H.DEFAULTS,e.data(),"object"==typeof t&&t);e.data("clockpicker",new H(e,n))}})}}();